<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>three.js</title>
		<style>
			body { margin: 0; background-color: #181818; }
			canvas { width: 100%; height: 100% };
		</style>
	</head>
	<body>
		<!-- where the content goes -->
		<div id="container">
		</div>

		<!-- javascript libs at the end -->
		<script src="jquery-1.8.2.min.js"></script>
		<script src="three.min.js"></script>
		<script src="physi.js"></script>

		<!-- rendering -->
		<script>
			'use strict';

			Physijs.scripts.worker = 'physijs_worker.js';
			Physijs.scripts.ammo = 'ammo.js';

			// set the scene size
			var WIDTH = window.innerWidth,
			  HEIGHT = window.innerHeight;

			// set some camera attributes
			var VIEW_ANGLE = 45,
			  ASPECT = WIDTH / HEIGHT,
			  NEAR = 0.1,
			  FAR = 10000;

			// get the DOM element to attach to
			var container = $('#container');

			// create a WebGL renderer, camera
			// and a scene
			var renderer = new THREE.WebGLRenderer({antialias: true});
			renderer.setClearColorHex(0x181818);
			renderer.setFaceCulling("back");

			var camera =
			  new THREE.PerspectiveCamera(
			    VIEW_ANGLE,
			    ASPECT,
			    NEAR,
			    FAR);

			var scene = new Physijs.Scene;

			// add the camera to the scene
			scene.add(camera);

			// the camera starts at 0,0,0
			// so pull it back
			camera.position.z = 300;

			// start the renderer
			renderer.setSize(WIDTH, HEIGHT);

			// attach the render-supplied DOM element
			container.append(renderer.domElement);

			////////////////////////////////////////////////////////////////////////////////////////////

			// set up the sphere vars
			var radius = 50,
			    segments = 24,
			    rings = 24;

			// create the sphere's material
			var sphereMaterial =
			  new THREE.MeshLambertMaterial(
			    {
			      color: 0xCC0000
			    });

			// create a new mesh with
			// sphere geometry
			var sphere = new Physijs.SphereMesh(

			  new THREE.SphereGeometry(
			    radius,
			    segments,
			    rings),

			  sphereMaterial);

			// add the sphere to the scene
			sphere.position.x = -100;
			scene.add(sphere);

			// Add a green cube
			var cubeGeometry = new THREE.CubeGeometry(50, 50, 50);
			var cubeMaterial = new THREE.MeshLambertMaterial({color: 0x00ff00});
			var cube = new Physijs.BoxMesh(cubeGeometry, cubeMaterial);
			cube.position.x = 100;
			scene.add(cube);

			////////////////////////////////////////////////////////////////////////////////////////////

			// create a point light
			var pointLight =
			  new THREE.PointLight(0xFFFFFF);

			// set its position
			pointLight.position.x = 10;
			pointLight.position.y = 50;
			pointLight.position.z = 130;

			// add to the scene
			scene.add(pointLight);

			////////////////////////////////////////////////////////////////////////////////////////////
			
			// draw!
			function render(){
				requestAnimationFrame(render); // 60fps, but pauses if we tab away

				scene.simulate(); // run physics

				renderer.render(scene, camera);
			}

			render();

			////////////////////////////////////////////////////////////////////////////////////////////
		</script>
	</body>
</html>